"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9534],{9534:(J,_,d)=>{d.r(_),d.d(_,{InventarioActualPageModule:()=>R});var s=d(6895),u=d(4719),a=d(7479),m=d(6069),l=d(5861),t=d(6738),g=d(1549),P=d(529);let f=(()=>{class n{constructor(e,o){this.http=e,this.databaseService=o}updateInventaryProduct(e,o){var i=this;return(0,l.Z)(function*(){const r={updateData:o,productID:e};return!!(yield i.http.post(i.databaseService.apiURL+"updateInventaryProduct",r).toPromise())})()}deleteInventaryProduct(e){var o=this;return(0,l.Z)(function*(){return!!(yield o.http.post(o.databaseService.apiURL+"deleteInventaryProduct",{productID:e}).toPromise())})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(P.eN),t.LFG(g.k))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function h(n,c){1&n&&(t.TgZ(0,"ion-col",15)(1,"p",16),t._uU(2,"Nombre"),t.qZA()())}function M(n,c){1&n&&(t.TgZ(0,"ion-col",15)(1,"p",16),t._uU(2,"Descripci\xf3n"),t.qZA()())}function v(n,c){1&n&&(t.TgZ(0,"ion-col",15)(1,"p",16),t._uU(2,"Categoria"),t.qZA()())}function C(n,c){if(1&n&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function T(n,c){1&n&&(t.TgZ(0,"ion-col",15)(1,"p",16),t._uU(2,"Stock"),t.qZA()())}function Z(n,c){1&n&&(t.TgZ(0,"ion-col",15)(1,"p",16),t._uU(2,"Precio compra/venta"),t.qZA()())}let y=(()=>{class n{constructor(e,o){this.databaseService=e,this.inventaryService=o,this.productData={product_adquisitionprice:!1,product_category:!1,product_description:!1,product_id:!1,product_name:!1,product_sellingprice:!1,product_stock:!1},this.productCategories=["Libros","Material de laboratorio","Manuales","Material escolar","Souvenirs","Ropa"]}ngOnInit(){this.itemToEdit&&(this.productData=JSON.parse(JSON.stringify(this.itemToEdit)))}saveProduct(){var e=this;return(0,l.Z)(function*(){const o={product_name:e.productData.product_name,product_stock:e.productData.product_stock,product_adquisitionprice:e.productData.product_adquisitionprice,product_sellingprice:e.productData.product_sellingprice,product_description:e.productData.product_description,product_category:e.productData.product_category},i=yield e.databaseService.insertRecordToDB(o,"products");i.insertId&&(o.product_id=i.insertId,e.addProductFn(o),e.closeModalFn())})()}editProduct(){var e=this;return(0,l.Z)(function*(){const o=JSON.parse(JSON.stringify(e.productData.product_id));let i=e.productData;(yield e.inventaryService.updateInventaryProduct(o,i))?(console.log("todobn"),e.saveEditProductModalFn(o,i)):console.log("todo mal")})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.k),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-register-product-modal"]],inputs:{itemToEdit:"itemToEdit",closeModalFn:"closeModalFn",addProductFn:"addProductFn",saveEditProductModalFn:"saveEditProductModalFn"},decls:34,vars:15,consts:[[2,"display","flex","flex-direction","row","width","100%","justify-content","flex-end"],["fill","clear","color","danger",3,"click"],[2,"display","flex","align-items","center","justify-content","center"],[2,"text-align","center"],["size","2",4,"ngIf"],["size","10"],["type","text","placeholder","Nombre del producto",3,"ngModel","ngModelChange"],["type","text","placeholder","Descripci\xf3n",3,"ngModel","ngModelChange"],["interface","popover","placeholder","Categor\xeda",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Stock inicial","type","numeric",3,"ngModel","ngModelChange"],["size","5"],["placeholder","Precio compra","type","numeric",3,"ngModel","ngModelChange"],["placeholder","Precio venta","type","numeric",3,"ngModel","ngModelChange"],[3,"disabled","click"],["size","2"],[1,"productFieldLable"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"ion-button",1),t.NdJ("click",function(){return o.closeModalFn()}),t._uU(2," Cancelar "),t.qZA()(),t.TgZ(3,"div",2)(4,"h3",3),t._uU(5),t.qZA()(),t.TgZ(6,"ion-grid")(7,"ion-row"),t.YNc(8,h,3,0,"ion-col",4),t.TgZ(9,"ion-col",5)(10,"ion-input",6),t.NdJ("ngModelChange",function(r){return o.productData.product_name=r}),t.qZA()()(),t.TgZ(11,"ion-row"),t.YNc(12,M,3,0,"ion-col",4),t.TgZ(13,"ion-col",5)(14,"ion-input",7),t.NdJ("ngModelChange",function(r){return o.productData.product_description=r}),t.qZA()()(),t.TgZ(15,"ion-row"),t.YNc(16,v,3,0,"ion-col",4),t.TgZ(17,"ion-col",5)(18,"ion-select",8),t.NdJ("ngModelChange",function(r){return o.productData.product_category=r}),t.YNc(19,C,2,2,"ion-select-option",9),t.qZA()()(),t.TgZ(20,"ion-row"),t.YNc(21,T,3,0,"ion-col",4),t.TgZ(22,"ion-col",5)(23,"ion-input",10),t.NdJ("ngModelChange",function(r){return o.productData.product_stock=r}),t.qZA()()(),t.TgZ(24,"ion-row"),t.YNc(25,Z,3,0,"ion-col",4),t.TgZ(26,"ion-col",11)(27,"ion-input",12),t.NdJ("ngModelChange",function(r){return o.productData.product_adquisitionprice=r}),t.qZA()(),t.TgZ(28,"ion-col",11)(29,"ion-input",13),t.NdJ("ngModelChange",function(r){return o.productData.product_sellingprice=r}),t.qZA()()(),t.TgZ(30,"ion-row",3)(31,"ion-col")(32,"ion-button",14),t.NdJ("click",function(){return o.itemToEdit?o.editProduct():o.saveProduct()}),t._uU(33),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(o.itemToEdit?"Editar producto":"Registrar producto nuevo"),t.xp6(3),t.Q6J("ngIf",o.itemToEdit),t.xp6(2),t.Q6J("ngModel",o.productData.product_name),t.xp6(2),t.Q6J("ngIf",o.itemToEdit),t.xp6(2),t.Q6J("ngModel",o.productData.product_description),t.xp6(2),t.Q6J("ngIf",o.itemToEdit),t.xp6(2),t.Q6J("ngModel",o.productData.product_category),t.xp6(1),t.Q6J("ngForOf",o.productCategories),t.xp6(2),t.Q6J("ngIf",o.itemToEdit),t.xp6(2),t.Q6J("ngModel",o.productData.product_stock),t.xp6(2),t.Q6J("ngIf",o.itemToEdit),t.xp6(2),t.Q6J("ngModel",o.productData.product_adquisitionprice),t.xp6(2),t.Q6J("ngModel",o.productData.product_sellingprice),t.xp6(3),t.Q6J("disabled",!(o.productData.product_name&&o.productData.product_category&&o.productData.product_description&&o.productData.product_stock&&o.productData.product_sellingprice&&o.productData.product_adquisitionprice)),t.xp6(1),t.hij(" ",o.itemToEdit?"Guardar cambios":"Registrar producto"," "))},dependencies:[s.sg,s.O5,u.JJ,u.On,a.YG,a.wI,a.jY,a.pK,a.Nd,a.t9,a.n0,a.QI,a.j9],styles:[".productFieldLable[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function I(n,c){if(1&n&&(t.TgZ(0,"td",8),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.hij(" ",e," ")}}function A(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.ynx(16),t.TgZ(17,"ion-icon",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.openProductRegisterModal("editItem",r))}),t.qZA(),t.BQk(),t.ynx(18),t.TgZ(19,"ion-icon",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.deleteItem(r.product_id,r.product_name))}),t.qZA(),t.BQk(),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(2),t.hij(" ",e.product_id," "),t.xp6(2),t.hij(" ",e.product_name," "),t.xp6(2),t.hij(" ",e.product_description," "),t.xp6(2),t.hij(" ",e.product_category," "),t.xp6(2),t.hij(" ",e.product_stock," "),t.xp6(2),t.hij(" $",e.product_adquisitionprice," "),t.xp6(2),t.hij(" $",e.product_sellingprice," ")}}const b=[{path:"",component:(()=>{class n{constructor(e,o,i,r){this.modalController=e,this.alertController=o,this.databaseService=i,this.inventaryService=r,this.inventaryTableHeaders=["ID Producto","Nombre Producto","Descripci\xf3n","Categor\xeda","Cantidad en Stock","Precio Unitario","Precio de venta","Acciones"],this.filterItems=""}ngOnInit(){var e=this;return(0,l.Z)(function*(){e.registeredProducts=yield e.databaseService.readTableData("products")})()}searchProduct(){console.log("buscando producto we")}closeProductRegisterModal(){this.showEditRegisterModal.dismiss()}addProductFn(e){this.registeredProducts.push(e)}openProductRegisterModal(e,o){var i=this;return(0,l.Z)(function*(){return o&&(i.seletecItemToEdit=o),i.showEditRegisterModal=yield i.modalController.create({component:y,componentProps:{opType:e,itemToEdit:o,modalContainer:{},saveEditProductModalFn:i.saveEditProductModalFn.bind(i),closeModalFn:i.closeProductRegisterModal.bind(i),addProductFn:i.addProductFn.bind(i)}}),yield i.showEditRegisterModal.present()})()}saveEditProductModalFn(e,o){const i=this.registeredProducts.findIndex(r=>r.product_id===e);this.registeredProducts[i]=o,console.log(i)}closeModal(e){this.showEditRegisterModal=e}closeIncomingsModal(e){this.showProductEntriesModal=e}saveProductMock(e){this.registeredProducts.push(e)}deleteItem(e,o){var i=this;return(0,l.Z)(function*(){yield(yield i.alertController.create({message:`Est\xe1 a punto de eliminar ${o} del inventario, \xbfDesea continuar?`,buttons:[{text:"Confirmar",handler:()=>{i.deleteInventaryItem(e)}},{text:"Cancelar",role:"cancel",handler:()=>{}}]})).present()})()}deleteInventaryItem(e){if(this.inventaryService.deleteInventaryProduct(e)){const i=this.registeredProducts.findIndex(r=>r.product_id===e);this.registeredProducts.splice(i,1)}}displayProductEntriesModal(){this.showProductEntriesModal=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.IN),t.Y36(a.Br),t.Y36(g.k),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["page-inventario-actual"]],decls:18,vars:3,consts:[["slot","start"],[1,"searchMenuInventario"],["type","text","name","filterItems","placeholder","Buscar un producto",1,"form-control",3,"ngModel","ngModelChange"],["name","search",3,"click"],[3,"click"],[1,"inventaryTableContainer"],["class","tableHeaders",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tableHeaders"],["name","create",3,"click"],["name","trash",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Inventario"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",1)(8,"ion-input",2),t.NdJ("ngModelChange",function(r){return o.filterItems=r}),t.qZA(),t.ynx(9),t.TgZ(10,"ion-icon",3),t.NdJ("click",function(){return o.searchProduct()}),t.qZA(),t.BQk(),t.TgZ(11,"ion-button",4),t.NdJ("click",function(){return o.openProductRegisterModal("newItem")}),t._uU(12," Agregar producto nuevo "),t.qZA()(),t.TgZ(13,"div",5)(14,"table")(15,"tr"),t.YNc(16,I,2,1,"td",6),t.qZA(),t.YNc(17,A,20,7,"tr",7),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("ngModel",o.filterItems),t.xp6(8),t.Q6J("ngForOf",o.inventaryTableHeaders),t.xp6(1),t.Q6J("ngForOf",o.registeredProducts))},dependencies:[s.sg,u.JJ,u.On,a.YG,a.Sm,a.W2,a.Gu,a.gu,a.pK,a.fG,a.wd,a.sr,a.j9],styles:[".searchMenuInventario[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;flex-direction:row;align-items:center;font-size:1.2em;justify-content:flex-end;margin-bottom:20px}.searchMenuInventario[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;margin-right:12px}.searchMenuInventario[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{max-width:280px}.inventaryTableContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;text-align:center}.inventaryTableContainer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:80%;max-width:80%;border:2px solid black}.inventaryTableContainer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .tableHeaders[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;background-color:#32db64;color:#fff}.inventaryTableContainer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}.inventaryTableContainer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:first-child{margin-right:15px}.inventaryTableContainer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#cacaca}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(b),m.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,u.u5,a.Pc,E]}),n})()}}]);